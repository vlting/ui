<!-- auto-queue -->
# A11y: Form Inputs — Input, Textarea, Select

## Priority: HIGH

## Audit Findings

### Input (`packages/components/Input/Input.tsx`)
1. **Label is a `<span>`, not `<label>`** — `InputLabel` is `styled(Text, ...)` with no `tag: 'label'`. Not programmatically associated with the input.
2. **No `id` on InputField** — Cannot link label via `htmlFor`.
3. **No `hoverStyle`** on InputFrame or InputField.
4. **No `aria-describedby`** linking helper/error text to the input.
5. `aria-label={label}` partially mitigates the label issue, but is not the correct pattern.

### Textarea (`packages/components/Textarea/Textarea.tsx`)
1. **Label is a `<span>`, not `<label>`** — `TextareaLabel` is `styled(Text, ...)` with no `tag: 'label'`.
2. **No `aria-label` or `aria-labelledby`** at all.
3. **No `aria-describedby`** linking helper/error text.
4. **No `id`** on the textarea for label association.
5. Hover and focus styles exist (good).

### Select (`packages/components/Select/Select.tsx`)
1. **Trigger renders as `<div>`** — `SelectTrigger` is `styled(XStack, ...)`. Not keyboard-focusable.
2. **No keyboard navigation** — Cannot open with Enter/Space, no arrow keys for options.
3. **No Escape key** to close dropdown.
4. **Items are `<div>` elements** with `onPress` only — not keyboard-activatable.
5. `role="combobox"` implies text input pattern; may be more appropriate as a listbox trigger.
6. Has hover and focus styles (good), but they can't activate since the trigger can't receive focus.

## Required Changes

### 1. Fix Input label association

**Add `tag: 'label'` to InputLabel:**
```tsx
const InputLabel = styled(Text, {
  tag: 'label',
  fontFamily: '$body',
  // ...
})
```

**Generate a unique ID for input-label association:**
```tsx
import { useId } from 'react'

export function Input({ ... }: InputProps) {
  const inputId = useId()
  const helperId = useId()
  const displayHelper = error && errorMessage ? errorMessage : helperText

  return (
    <YStack>
      {label && <InputLabel htmlFor={inputId} size={size}>{label}</InputLabel>}
      <InputFrame ...>
        <InputField
          id={inputId}
          aria-describedby={displayHelper ? helperId : undefined}
          ...
        />
      </InputFrame>
      {displayHelper && (
        <InputHelper id={helperId} ...>{displayHelper}</InputHelper>
      )}
    </YStack>
  )
}
```

**Add hoverStyle to InputFrame:**
```tsx
const InputFrame = styled(XStack, {
  // ...existing
  hoverStyle: {
    borderColor: '$borderColorHover',
  },
  // ...
})
```

### 2. Fix Textarea label association

Same pattern as Input:
- Add `tag: 'label'` to `TextareaLabel`
- Generate `useId()` for textarea ID and helper ID
- Add `htmlFor`, `id`, and `aria-describedby` linkages
- The Textarea already has hover and focus styles (good)

### 3. Fix Select — semantic trigger and keyboard support

**Make trigger keyboard-accessible:**
Add `tag: 'button'` to `SelectTrigger`:
```tsx
const SelectTrigger = styled(XStack, {
  tag: 'button',
  // ...existing styles
})
```

Or wrap the trigger in a native `<button>`. Reset default button styles.

**Add keyboard support:**
In the Select component function:
- **Enter/Space on trigger**: Toggle dropdown open/closed
- **Arrow Down/Up when open**: Move focus between items
- **Escape when open**: Close the dropdown
- **Enter on focused item**: Select it and close
- **Type-ahead**: Optional, but nice to have

**Implementation approach:**
Add an `onKeyDown` handler to the trigger:
```tsx
const handleKeyDown = (e: React.KeyboardEvent) => {
  if (e.key === 'Enter' || e.key === ' ') {
    e.preventDefault()
    setOpen(!open)
  }
  if (e.key === 'Escape' && open) {
    setOpen(false)
  }
  if (e.key === 'ArrowDown' && open) {
    e.preventDefault()
    // Focus next item
  }
  if (e.key === 'ArrowUp' && open) {
    e.preventDefault()
    // Focus previous item
  }
}
```

**Make items keyboard-focusable:**
Add `tabIndex={0}` or use roving tabindex on `SelectItemFrame`. Add `onKeyDown` for Enter to select.

**Add label association:**
- Accept `id` prop on the root, generate with `useId()` if not provided
- Use `aria-labelledby` linking trigger to its label (if used inside a Form.Field)

**Close on Escape and click-outside:**
Add Escape handler (as above). Click-outside already exists.

## Scope

Files modified:
- `packages/components/Input/Input.tsx`
- `packages/components/Textarea/Textarea.tsx`
- `packages/components/Select/Select.tsx`

## Verification

- Build: `yarn build`
- Keyboard: Tab through all form inputs. Labels clickable. Select fully keyboard-operable.
- Screen reader: Labels announced. Helper/error text announced via `aria-describedby`.
- Hover: Input frame shows visible hover state.

## Constraints

- Read `AI_CONSTITUTION.md` and `DESIGN_CONSTITUTION.md` before starting
- Check for `*.spec.md` files for these components
- No hardcoded colors — theme tokens only
- Must work in light and dark modes, all 3 brands
- Add `// @ts-expect-error Tamagui v2 RC` where needed
- Use `useId()` from React for ID generation (React 18+)
- Do NOT modify kitchen-sink demo files — that is handled by the integration task (007)
