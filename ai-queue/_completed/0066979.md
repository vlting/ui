# Commit History

- `7e49ebf` feat(examples): add Crushd dating example app with purple brand
- `0066979` chore(queue): complete task 006 â€” Crushd example app

# Task 006 â€” Crushd: Dating Example App (Purple Brand + Full Implementation)

## Overview

Rename and rebrand the dating example app from "Kinship" to **"Crushd"** with a vibrant purple brand theme and warm neutral tones. Then fully implement all pages in the example app following the PRODUCT.md PRD created by task 004.

**Depends on:** Tasks 004 (skeleton + PRD) and 005 (component implementations) should be completed first.

---

## Pre-flight

Before starting, verify:

1. `examples/dating/PRODUCT.md` exists (created by task 004)
2. `examples/dating/` app skeleton exists with `package.json`, `vite.config.ts`, `main.tsx`, `router.tsx`, `theme/datingBrand.ts`
3. `src/dating/` contains implemented components (from task 005) â€” not just stubs
4. Read `AI_CONSTITUTION.md` and `DESIGN_CONSTITUTION.md` at repo root before making changes

If task 004 or 005 are incomplete, the app skeleton or components may still be stubs. Adapt accordingly â€” you can build pages using `@vlting/ui/primitives`, `@vlting/ui/layout`, and `@vlting/ui/forms` as fallbacks where dating-specific components aren't ready yet.

---

## Part 1 â€” Rebrand: "Kinship" â†’ "Crushd"

### App Name: **Crushd**
### Tagline: *"Your next crush is closer than you think."*

Update all references across the example app:
- `examples/dating/package.json` â†’ name: `@vlting/examples-crushd`
- `examples/dating/index.html` â†’ title: `Crushd â€” Your next crush is closer than you think`
- `examples/dating/src/theme/datingBrand.ts` â†’ rename to `crushdBrand.ts`, brand name: `crushd`
- `examples/dating/src/main.tsx` â†’ update import path
- Any text/labels in router, layout, or pages that say "Kinship" â†’ "Crushd"

Optionally rename the directory itself from `examples/dating/` to `examples/crushd/` for consistency with the Volta naming pattern (`examples/volta/`). If renaming the directory, update all internal paths.

---

## Part 2 â€” Purple Brand Theme (`crushdBrand.ts`)

Replace the coral/warm brand from task 004 with a purple-forward theme. Follow the `voltaBrand.ts` pattern exactly.

### Neutral Palette â€” Warm Mauve (pink-gray undertone)

**Light neutral (12 steps):**
```
#faf8f9   â€” 1  near-white with subtle pink warmth
#f3eff1   â€” 2  very light mauve
#e8e2e6   â€” 3  light mauve
#dbd3d8   â€” 4  medium-light mauve
#c9bfc6   â€” 5  medium mauve
#afa3ac   â€” 6  medium-strong mauve
#8f8390   â€” 7  mauve
#706474   â€” 8  dark mauve
#544959   â€” 9  darker mauve
#3d3342   â€” 10 very dark mauve
#28202d   â€” 11 near-black mauve
#17111b   â€” 12 darkest mauve
```

**Dark neutral (12 steps) â€” inverted order of light, adjusted for dark mode readability:**
```
#17111b   â€” 1  near-black
#1f1825   â€” 2  very dark mauve
#28202d   â€” 3  dark mauve
#332a39   â€” 4  dark mauve
#3f3547   â€” 5  medium-dark mauve
#504659   â€” 6  medium mauve
#665a6d   â€” 7  medium-light mauve
#7e7285   â€” 8  lighter mauve
#9c90a3   â€” 9  light mauve
#bcb2c1   â€” 10 very light mauve
#dad2de   â€” 11 near-white mauve
#f0ecf2   â€” 12 near-white
```

### Accent Palette â€” Electric Purple

**Light purple (12 steps):**
```
#f5f0ff   â€” 1  near-white purple tint
#ede5ff   â€” 2  very light purple
#d8c8ff   â€” 3  light purple
#c0a5ff   â€” 4  medium-light purple
#a67fff   â€” 5  medium purple
#8b5cf6   â€” 6  medium-strong purple
#7c3aed   â€” 7  electric purple (PRIMARY BRAND COLOR)
#6d28d9   â€” 8  deep purple
#5b21b6   â€” 9  deeper purple
#4c1d95   â€” 10 very deep purple
#3b0f7a   â€” 11 darkest purple
#2a0860   â€” 12 near-black purple
```

**Dark purple (12 steps) â€” inverted:**
```
#2a0860   â€” 1
#3b0f7a   â€” 2
#4c1d95   â€” 3
#5b21b6   â€” 4
#6d28d9   â€” 5
#7c3aed   â€” 6
#8b5cf6   â€” 7  electric purple (primary in dark mode)
#a67fff   â€” 8
#c0a5ff   â€” 9
#d8c8ff   â€” 10
#ede5ff   â€” 11
#f5f0ff   â€” 12
```

### Accent Palette Key
Name the accent palette `purple` (like Volta uses `cobalt`):
```ts
accentPalettes: {
  purple: {
    light: lightPurple,
    dark: darkPurple,
  },
},
```

### Token Overrides
```ts
tokens: {
  radius: {
    0: 0, 1: 6, 2: 8, 3: 12, 4: 16, 5: 20, 6: 24, 7: 28, 8: 32, 9: 40, 10: 48, 11: 56, 12: 9999,
    true: 12,  // softer/rounder than Volta â€” dating apps feel warmer
  },
},
```

### Outline
```ts
outline: { width: 2, offset: 2 },
```

### Shadows (warm-toned)
```ts
shadows: {
  light: {
    sm: '0 1px 2px rgba(23, 17, 27, 0.06)',
    md: '0 4px 8px rgba(23, 17, 27, 0.08), 0 1px 3px rgba(23, 17, 27, 0.05)',
    lg: '0 8px 24px rgba(23, 17, 27, 0.10), 0 2px 8px rgba(23, 17, 27, 0.06)',
    xl: '0 16px 48px rgba(23, 17, 27, 0.14), 0 4px 16px rgba(23, 17, 27, 0.08)',
  },
  dark: {
    sm: '0 1px 2px rgba(0, 0, 0, 0.30)',
    md: '0 4px 8px rgba(0, 0, 0, 0.40), 0 1px 3px rgba(0, 0, 0, 0.24)',
    lg: '0 8px 24px rgba(0, 0, 0, 0.50), 0 2px 8px rgba(0, 0, 0, 0.30)',
    xl: '0 16px 48px rgba(0, 0, 0, 0.60), 0 4px 16px rgba(0, 0, 0, 0.40)',
  },
},
```

### Animations
```ts
animations: {
  driver: 'css',
  durations: { instant: 80, fast: 120, medium: 200, slow: 350 },
  easings: {
    standard: 'cubic-bezier(0.4, 0, 0.2, 1)',
    enter: 'cubic-bezier(0, 0, 0.2, 1)',
    exit: 'cubic-bezier(0.4, 0, 1, 1)',
    spring: 'cubic-bezier(0.22, 1.6, 0.36, 1)',  // bouncier â€” playful feel
  },
},
```

Export both:
```ts
export const crushdBrand: BrandDefinition = { ... }
export const crushdConfig = createBrandConfig(crushdBrand)
```

---

## Part 3 â€” Mock Data (`src/data/mock.ts`)

Create rich, fun, realistic mock data. All data should feel like a real dating app.

### Mock Profiles (20 profiles)
```ts
export interface MockProfile {
  id: string
  name: string
  age: number
  bio: string
  distance: string           // e.g. "2 km away"
  photos: string[]           // placeholder URLs (use https://i.pravatar.cc/400?u=ID or similar)
  interests: string[]        // e.g. ["hiking", "coffee", "indie music", "board games"]
  location: string           // city
  occupation: string         // creative/fun occupations
  verified: boolean
  prompts: { question: string; answer: string }[]  // 2-3 Hinge-style prompts
}
```
- Diverse names, ages 22-38, mix of backgrounds
- Creative bios (1-2 sentences, personality-driven)
- Fun occupations: "freelance illustrator", "pastry chef in training", "data scientist by day, DJ by night"
- 3-5 interests per person from a realistic pool
- 2-3 prompt answers each (witty, genuine, conversational)

### Mock Pod (8 members â€” the current week's pod)
```ts
export interface MockPodMember {
  profileId: string
  matchStatus: 'none' | 'sent' | 'received' | 'mutual'
  joinedAt: string
}

export interface MockPod {
  id: string
  name: string              // e.g. "Week 12 â€” Starlight Pod"
  startDate: string
  endDate: string
  members: MockPodMember[]
}
```

### Mock Activities (ice-breakers + quizzes)
```ts
export interface MockIceBreaker {
  id: string
  day: number               // 1-7
  prompt: string
  responses: { profileId: string; text: string; timestamp: string }[]
}

export interface MockQuiz {
  id: string
  day: number
  question: string
  options: { id: string; text: string }[]
  votes: { profileId: string; optionId: string }[]
}
```
- 5-7 ice-breakers with fun prompts: "What's a hill you'll die on?", "Describe your ideal lazy Sunday", "Most underrated movie of all time?", etc.
- 5-7 quizzes: "Pineapple on pizza?", "Beach vacation or mountain cabin?", "Cats or dogs?", etc.
- Populate with realistic responses from the pod members

### Mock Conversations (3-4 DM threads)
```ts
export interface MockMessage {
  id: string
  senderId: string          // 'me' or a profile id
  text: string
  timestamp: string
}

export interface MockConversation {
  id: string
  profileId: string
  messages: MockMessage[]
}
```

### Mock Connections (4-6 past mutual matches)
```ts
export interface MockConnection {
  id: string
  profileId: string
  matchedAt: string
  lastMessage?: string
  lastMessageTime?: string
  unread: boolean
}
```

---

## Part 4 â€” App Layout (`src/layouts/AppShellLayout.tsx`)

Follow the Volta `AppShellLayout.tsx` pattern closely, adapted for Crushd.

### TopNav
- **Logo**: Heart icon (`Heart` from `@tamagui/lucide-icons`) in brand purple `#7c3aed`
- **App name**: "Crushd" in bold
- **Right side**: Notification bell, user avatar (opens user sheet)

### Sidebar (desktop)
Navigation items:
| Path | Label | Icon |
|------|-------|------|
| `/` | Home | `Home` |
| `/pod` | My Pod | `Users` |
| `/messages` | Messages | `MessageCircle` |
| `/connections` | Connections | `Heart` |
| `/profile` | Profile | `User` |
| `/preferences` | Preferences | `SlidersHorizontal` |
| `/settings` | Settings | `Settings` |

Footer: Light/dark theme toggle (same pattern as Volta)

### BottomTabs (mobile) â€” 5 items
Home, My Pod, Messages, Connections, Profile

### Drawer (mobile)
Full nav list (same as sidebar)

### Icon casting
Use the same `IconFC` cast pattern as Volta:
```ts
type IconFC = React.ComponentType<{ size?: number; color?: string; 'aria-hidden'?: boolean }>
const Heart = _Heart as IconFC
```

---

## Part 5 â€” Pages (Full Implementation)

Implement all pages as real, functional UI using mock data. Each page should demonstrate `@vlting/ui` components in a realistic dating app context. Where dating-specific components from `src/dating/` are available and implemented, use them. Where they're still stubs, build equivalent UI using primitives (`@vlting/ui/primitives`, `@vlting/ui/layout`, `@vlting/ui/forms`).

### 5a. Home Page (`/`) â€” `HomePage.tsx`

The pod dashboard / landing page:
- **Pod countdown**: "3 days left in this pod" with a progress-style indicator
- **Pod name**: "Week 12 â€” Starlight Pod"
- **Quick stats row**: "8 members Â· Day 4 of 7 Â· 2 mutual matches"
- **Today's activity cards**: Preview of today's ice-breaker and quiz (tappable â†’ navigate to detail)
- **Pod member grid**: 2x4 grid of avatar circles with names, match status indicators
- **CTA**: "See today's ice-breaker" button

### 5b. Pod Detail Page (`/pod`) â€” `PodPage.tsx`

Full pod view:
- **Header**: Pod name, countdown timer, member count
- **Member grid** (larger cards): Photo, name, age, match status badge, tap â†’ `/pod/member/:id`
- **Activity feed section**: List of recent ice-breakers and quizzes with response counts
- **"Send match request" button** on each member card (if not already sent)

### 5c. Ice-Breaker Page (`/pod/icebreaker`) â€” `IceBreakerPage.tsx`

Today's ice-breaker detail:
- **Prompt card** (large, prominent): The question text
- **Response list**: Each pod member's response with their avatar, name, and text
- **Your response area**: Text input at the bottom to add/edit your response
- **Thread support**: Tap a response to see threaded replies

### 5d. Quiz Page (`/pod/quiz`) â€” `QuizPage.tsx`

Today's quiz:
- **Question card**: The quiz question
- **Option buttons**: 2-4 selectable options (styled as large tappable cards)
- **Results view** (after voting): Bar chart or percentage display showing how the pod voted
- **Your selection** highlighted

### 5e. Pod Member Profile (`/pod/member/:id`) â€” `PodMemberPage.tsx`

View a pod member's profile:
- **Photo area**: Large avatar/photo placeholder
- **Name, age, location, occupation**
- **Bio section**
- **Prompt answers** (Hinge-style Q&A blocks)
- **Interests** as tag chips
- **Action buttons**: "Send Match Request" / "Match Sent" / "It's a Match!", "Message", "Block/Report"

### 5f. Messages Page (`/messages`) â€” `MessagesPage.tsx`

DM conversation list:
- List of active conversations with pod members
- Each row: Avatar, name, last message preview, timestamp, unread dot
- Empty state: "No messages yet â€” start a conversation with your pod!"
- Tap â†’ `/messages/:id`

### 5g. DM Thread (`/messages/:id`) â€” `DMThreadPage.tsx`

Chat conversation:
- **Header**: Name, avatar, "in your pod" badge
- **Message bubbles**: Left-aligned (theirs, light bg), right-aligned (yours, purple bg)
- **Date dividers**: "Today", "Yesterday", etc.
- **"You matched on [date]"** divider if applicable
- **Input area**: Text input + send button at bottom
- Message list populated from mock data

### 5h. Connections Page (`/connections`) â€” `ConnectionsPage.tsx`

Persistent matched connections:
- **Grid or list** of connection cards
- Each: Photo, name, "Matched X days ago", last message preview
- Unread indicator for new messages
- Empty state: "No connections yet â€” finish this week's pod to find your match!"
- Tap â†’ `/connections/:id`

### 5i. Connection Profile (`/connections/:id`) â€” `ConnectionProfilePage.tsx`

Same layout as Pod Member Profile but with:
- "Matched on [date]" badge instead of match request button
- "Message" button (links to connection's DM thread)
- "Unmatch" button (tertiary/destructive)

### 5j. Week Review (`/week-review`) â€” `WeekReviewPage.tsx`

End-of-week matching prompt:
- **Header**: "This week's pod is ending! Who would you like to match with?"
- **Member grid**: Cards for each pod member with:
  - Photo, name, age
  - Checkbox/toggle to select for matching
  - "Already matched" badge if mutual match exists
- **Submit button**: "Submit Matches" (with confirmation)
- **Post-submit view**: "You matched with X people! ðŸŽ‰" celebration

### 5k. Profile Page (`/profile`) â€” `ProfilePage.tsx`

Your own profile editor:
- **Photo grid** (3x2): Avatar placeholders with "+" add button
- **Name, age, location** (displayed, not editable inline)
- **Bio section**: Textarea (editable)
- **Prompt answers**: 3 prompts with editable answers
- **Interests**: Tag chips (tappable to edit)
- **Stats card**: "12 likes received Â· 3 mutual matches Â· Profile 85% complete"

### 5l. Preferences Page (`/preferences`) â€” `PreferencesPage.tsx`

Matching preferences:
- **Age range**: Dual-handle slider (or two number inputs) with "21 â€“ 35" display
- **Distance**: Slider with km/mi toggle, "Within 25 km"
- **Interests**: Chip selector for preferred shared interests
- **Deal-breakers**: Multi-select for hard filters (smoking, kids, etc.)
- **Gender preference**: Radio/select for who you want to be matched with
- **Save button**

### 5m. Onboarding Page (`/onboarding`) â€” `OnboardingPage.tsx`

Multi-step flow (standalone, NOT wrapped in AppShell â€” same as Volta):

1. **Welcome**: "Welcome to Crushd ðŸ’œ" hero, tagline, illustration area, "Get Started" button
2. **Basic Info**: Name, birthday (age), gender identity, location â€” form fields
3. **Photos**: 6-slot photo upload grid (placeholder UI)
4. **Interests**: Chip selector from a list of ~30 interests, select 5+
5. **Prompts**: Choose 3 prompts from a list, write answers
6. **Preferences**: Age range, distance, deal-breakers (condensed)
7. **Done**: "You're all set! Your first pod starts Monday." celebration screen with CTA

Use `@vlting/ui/forms` (`MultiStepForm`, `TextInput`, `TextArea`, `Select`) and `@vlting/ui/primitives` (`Button`, `Badge`, `Progress`).

### 5n. Settings Page (`/settings`) â€” `SettingsPage.tsx`

App settings (not matching preferences):
- **Account**: Email, phone number, change password
- **Notifications**: Toggle switches for push, match alerts, message alerts, pod updates
- **Privacy**: Show online status, show distance, hide from specific people
- **Appearance**: Theme toggle (light/dark/system)
- **Safety**: Blocked users list, report history
- **About**: App version, terms, privacy policy links
- **Danger zone**: "Pause Account", "Delete Account" (destructive)

Use `@vlting/ui/forms` (`Switch`, `Select`, `TextInput`) and `@vlting/ui/layout` (`SplitView` or section grouping).

---

## Part 6 â€” Routing (`src/router.tsx`)

```tsx
import { createBrowserRouter } from 'react-router-dom'
import { AppShellLayout } from './layouts/AppShellLayout'
// ... page imports

export const router = createBrowserRouter([
  { path: '/onboarding', element: <OnboardingPage /> },
  {
    element: <AppShellLayout />,
    children: [
      { path: '/', element: <HomePage /> },
      { path: '/pod', element: <PodPage /> },
      { path: '/pod/icebreaker', element: <IceBreakerPage /> },
      { path: '/pod/quiz', element: <QuizPage /> },
      { path: '/pod/member/:id', element: <PodMemberPage /> },
      { path: '/messages', element: <MessagesPage /> },
      { path: '/messages/:id', element: <DMThreadPage /> },
      { path: '/connections', element: <ConnectionsPage /> },
      { path: '/connections/:id', element: <ConnectionProfilePage /> },
      { path: '/week-review', element: <WeekReviewPage /> },
      { path: '/profile', element: <ProfilePage /> },
      { path: '/preferences', element: <PreferencesPage /> },
      { path: '/settings', element: <SettingsPage /> },
    ],
  },
])
```

---

## Tamagui v2 RC Workarounds (MANDATORY)

1. **Icon imports**: Always cast Lucide icons with `as IconFC`
2. **`styled()` with token defaults**: Add `// @ts-expect-error Tamagui v2 RC` before each call
3. **`GetProps<>` bug**: Define props from scratch â€” never use `GetProps<>` intersections
4. **JSX compat**: Cast any `@vlting/ui` component with token prop issues: `as React.ComponentType<Record<string, unknown>>`
5. **No `name` in styled()**: Omit it
6. **No `Pressable` from tamagui**: Use `react-native` import or `View` with `onPress`
7. **Sub-component casts**: Cast `Sheet.Frame`, `Popover.Trigger`, etc. before JSX usage

---

## Quality Checklist

- [ ] All "Kinship" references replaced with "Crushd"
- [ ] `crushdBrand.ts` has valid 12-step purple + warm mauve palettes (all `string[]`, NOT readonly)
- [ ] `createBrandConfig(crushdBrand)` works and exports `crushdConfig`
- [ ] App boots with `vite dev` without TypeScript errors
- [ ] All 14 pages render meaningful UI with mock data
- [ ] Navigation works: sidebar, bottom tabs, drawer, all route links
- [ ] Light/dark theme toggle works
- [ ] Mobile-responsive layout (sidebar â†’ drawer + bottom tabs)
- [ ] Onboarding is standalone (not wrapped in AppShell)
- [ ] Purple brand color (#7c3aed) is visually prominent throughout
- [ ] Chat bubbles show correct left/right alignment
- [ ] Pod member grid displays match status indicators
- [ ] Week review allows selecting members and shows confirmation
- [ ] Mock data is realistic, diverse, and fun
