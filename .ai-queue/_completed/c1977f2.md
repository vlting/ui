<!-- auto-queue -->
# Commit History
- c1977f2 — fix(a11y): wrap Button in native <button> element for keyboard/screen reader support

# A11y Fix: Button — Use Native `<button>` Element

## Priority: CRITICAL

## Root Cause

**`tag` prop in Tamagui v2 RC's `styled()` does NOT change the rendered HTML element.** `styled(XStack, { tag: 'button' })` renders `<div tag="button">`, not `<button>`. The `tag` value passes through as a spurious DOM attribute. This is confirmed by tracing the Tamagui v2 RC source: `tag` goes into `defaultProps`, not `staticConfig.Component`.

The Button currently renders as a `<div>` (or `<span>` in text contexts). This means:
- Not keyboard-focusable
- Not activatable via Enter/Space
- Not recognized by assistive technology as a button
- Violates WCAG 2.1 AA at the most fundamental level

## The Correct Pattern

Components that already have correct semantics (Checkbox, RadioGroup, Switch, Accordion) use **native HTML elements** with Tamagui styled components for visual presentation only. Follow this pattern:

```tsx
// WRONG — does NOT produce <button>:
const ButtonFrame = styled(XStack, { tag: 'button', ... })

// CORRECT — use a native <button> and style visually with Tamagui:
function Button({ children, ...props }) {
  return (
    <button type="button" style={{ all: 'unset', cursor: 'pointer' }}>
      <StyledButtonFrame {...props}>
        {children}
      </StyledButtonFrame>
    </button>
  )
}
```

Or better, render the Tamagui styled frame INSIDE a native button.

## Scope

Files modified:
- `packages/components/Button/Button.tsx`

## Required Changes

### 1. Wrap in native `<button>` element

Restructure `ButtonBase` to render a native `<button>` wrapping the styled visual frame:

```tsx
const ButtonBase = React.forwardRef<HTMLButtonElement, ButtonProps>(function ButtonBase(
  { loading, children, disabled, variant = 'solid', tone = 'neutral', size = 'md', onPress, ...props },
  ref,
) {
  const isDisabled = disabled ?? loading ?? false

  return (
    <button
      ref={ref}
      type="button"
      disabled={isDisabled}
      aria-busy={loading || undefined}
      onClick={isDisabled ? undefined : onPress}
      style={{
        all: 'unset',
        display: 'inline-flex',
        cursor: isDisabled ? 'not-allowed' : 'pointer',
      }}
    >
      <ButtonFrame
        variant={variant}
        size={size}
        disabled={isDisabled}
        {...props}
      >
        {loading ? <Spinner size="small" /> : children}
      </ButtonFrame>
    </button>
  )
})
```

**IMPORTANT**: Remove `tag: 'button'` from the `styled()` call — it doesn't work and adds a spurious DOM attribute. The `ButtonFrame` becomes purely visual.

### 2. Add visible focus ring on the native button

Since the native `<button>` has `all: unset`, add a focus-visible style. Use CSS-in-JS or a `focusWithinStyle` on `ButtonFrame`:

```tsx
const ButtonFrame = styled(XStack, {
  // ...existing styles (remove tag: 'button')
  focusWithinStyle: {
    outlineWidth: 2,
    outlineOffset: 2,
    outlineColor: '$outlineColor',
    outlineStyle: 'solid',
  },
  // ...
})
```

Or apply focus styles directly on the `<button>` with inline CSS or a className.

### 3. Add hoverStyle to ButtonFrame

Each variant needs a visible hover state:
- `solid`: darker background on hover
- `outline`: subtle background fill on hover
- `ghost`: subtle background fill on hover

### 4. Fix text contrast for solid variant

For solid buttons, `ButtonText` must use `$color1` (lightest palette step) instead of `$color` (darkest). Use React context to communicate `variant` from `ButtonBase` to `ButtonText`:

```tsx
const ButtonContext = React.createContext({ variant: 'solid', size: 'md' })
```

### 5. Implement tone variants

Wrap in `<Theme name={...}>` for non-neutral tones:
- `primary` → `blue`, `success` → `green`, `warning` → `orange`, `danger` → `red`

### 6. Fix loading state a11y

Add `aria-label="Loading"` on the button when loading, or use VisuallyHidden text.

## Reference: How Switch does it correctly

Look at `packages/components/Switch/Switch.tsx` — it renders a native `<button>` wrapping styled Tamagui track/thumb components. Follow this exact pattern.

## Verification

- Button renders as `<button>` in the DOM (inspect with browser devtools)
- Tab focuses the button, Enter/Space activates it
- Hover shows visible state change
- Solid buttons have readable text (light on dark)
- Build passes: `yarn build`

## Constraints

- Read `AI_CONSTITUTION.md`, `DESIGN_CONSTITUTION.md`, `Button.spec.md` before starting
- Do NOT use `tag` prop in `styled()` — it doesn't work in Tamagui v2 RC
- No hardcoded hex colors — theme tokens only
- Must work in light/dark modes, all 3 brands
- Do NOT modify kitchen-sink demo files
