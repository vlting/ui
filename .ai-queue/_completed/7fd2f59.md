<!-- auto-queue -->
<!-- depends-on: ai-queue/001, ai-queue/002, ai-queue/003, ai-queue/004, ai-queue/005, ai-queue/006 -->

# Commit History
- 21be8fc chore: consolidate ai-queue into .ai-queue and remove legacy directory
- 7fd2f59 chore: consolidate ai-queue into .ai-queue and remove legacy directory (#001) [merge]

# Merge `ai-queue/` into `.ai-queue/` and update skill

## Context

The repo currently has two queue directories:
- `.ai-queue/` — the canonical directory (has `_completed/` with archived tasks)
- `ai-queue/` — legacy directory (currently has active tasks being worked by other agents)

Both are being used simultaneously, which is confusing. Once all tasks in `ai-queue/` have been completed and archived, this task consolidates everything into `.ai-queue/` and removes the legacy directory entirely.

## Prerequisites

- **ALL tasks in `ai-queue/` must be completed and archived** before starting this work. Verify that `ai-queue/` contains no `.md` files (no pending, active, or wip files). Only a `_completed/` subfolder (if any) should remain.

## Steps

### 1. Merge completed archives

If `ai-queue/_completed/` exists and contains files:
- Move all files from `ai-queue/_completed/` into `.ai-queue/_completed/`
- If any filename conflicts exist, add an epoch-seconds suffix (e.g., `abc1234-1771520405.md`)

### 2. Delete the legacy `ai-queue/` directory

- Remove the entire `ai-queue/` directory from the repo (including any empty `_completed/` subfolder)
- Make sure to `git rm -r ai-queue/` if it's tracked, or just `rm -rf ai-queue/` if it's untracked

### 3. Update the `q` skill to remove legacy support

Edit `/Users/lucas/.claude/skills/q/SKILL.md`:

- **Remove the Queue Folder Resolution section's fallback logic.** Currently it says:
  1. If `./.ai-queue/` exists, use it.
  2. Otherwise, if `./ai-queue/` exists, use it (legacy).
  3. If neither exists, create `./.ai-queue/`.

  Change this to simply: always use `./.ai-queue/`. Create it if it doesn't exist. No fallback to `ai-queue/`.

- **Remove all references to `ai-queue/` (without the dot)** throughout the skill file. Search for every mention and either remove it or replace with `.ai-queue/`.

- **Update the watch loop bash script** in the "Watching for New Files" section — remove the `elif [ -d "./ai-queue" ]` fallback. The loop should only check for `./.ai-queue`.

- **Simplify any language** that references "legacy" or "fallback" directory resolution — it's no longer needed.

### 4. Verify

- Confirm `.ai-queue/` exists with its `_completed/` subfolder intact
- Confirm `ai-queue/` no longer exists
- Confirm the skill file no longer references the non-dot `ai-queue/` path

## Scope

- `ai-queue/` (delete entire directory)
- `.ai-queue/_completed/` (receive merged files)
- `/Users/lucas/.claude/skills/q/SKILL.md` (update to remove legacy support)
