# Commit History

- `9759cd0` — docs(queue): comprehensive front-of-frontend audit report
- `b01f725` — merge commit into main

---

<!-- auto-queue -->
<!-- depends-on: 003, 004 -->
# Audit Component Library and Example App

## Objective

Perform a comprehensive "front of frontend" audit of the `@vlting/ui` component library and the kitchen-sink example app. Produce a detailed audit report at `.ai-queue/_docs/audit-report.md` with findings, severity ratings, and recommended fixes.

## Why This Depends on 003 and 004

This audit should evaluate components against the UPDATED constitution rules (task 003) and the new shared quality contract (task 004). Wait for those to be completed and merged before starting.

## Audit Methodology

### Phase 1: Static Component Audit

For each implemented component in `packages/components/` and `packages/primitives/`, review:

1. **Semantic HTML**: Is the correct HTML element rendered? Check actual rendered output, not just source. Flag any `<div>` or `<View>` used where a semantic element should be.
2. **DOM Structure**: Count nesting depth. Flag any elements that exist solely for one CSS property. Flag unnecessary wrappers.
3. **Accessibility Attributes**: Check for required ARIA attributes per the component's role. Verify `aria-label`, `aria-describedby`, `aria-invalid`, `aria-busy`, `role` as appropriate.
4. **Focus Management**: Check for `focusVisibleStyle`. Verify focus is not suppressed (`outline: none` without replacement).
5. **Token Discipline**: Scan for any hardcoded colors, spacing values, font sizes, or radii.
6. **Keyboard Behavior**: For interactive components, verify keyboard event handlers or reliance on native element behavior.

**Components to audit** (at minimum — audit all that exist):
- Button, Input, Card, Dialog, Tabs (in `packages/components/`)
- Box, Text, Heading, Divider, Icon, Portal, Spacer, Stack, VisuallyHidden (in `packages/primitives/`)
- Any additional components found in `packages/`

### Phase 2: AccessLint Automated Audit

For each component, construct representative HTML and run it through AccessLint MCP `audit_html`:
- Include all variant combinations (e.g., Button with each `variant` value)
- Include error states, loading states, disabled states
- Record all violations with severity

### Phase 3: Example App Audit

Audit the kitchen-sink example app (`examples/kitchen-sink/`):

1. **Page structure**: Check for proper landmark elements, heading hierarchy, skip links
2. **Navigation**: Check for `<nav>` usage, keyboard-navigable menu
3. **Forms page**: Check all form controls for labels, error handling, fieldset/legend usage
4. **Color contrast**: Check representative pages for contrast compliance
5. **DOM depth**: Check for excessive nesting in composed views
6. **Layout**: Check for consistent spacing token usage, proper alignment

If the dev server can be started (`yarn dev:kitchen-sink`), use:
- Lighthouse MCP for full performance/accessibility/best-practices audit
- a11y-mcp for axe-core WCAG audit
- Playwright MCP for accessibility snapshot inspection

If the dev server cannot be started (build errors, etc.), note this in the report and rely on static analysis only.

### Phase 4: Cross-Cutting Concerns

Check these project-wide patterns:
1. **Reduced motion**: Is `prefers-reduced-motion` respected across all animated components?
2. **Dark mode**: Do all components work in both light and dark themes? Are there any contrast issues in dark mode specifically?
3. **Touch targets**: Are all interactive elements at least 24x24px?
4. **Error patterns**: Is there a consistent error display pattern across form components?
5. **Loading patterns**: Is there a consistent loading state pattern?

## Deliverable

Create `.ai-queue/_docs/audit-report.md` with:

### Report Structure

```markdown
# Front-of-Frontend Audit Report
## Date: [date]
## Scope: @vlting/ui component library + kitchen-sink example

## Executive Summary
[2-3 paragraph overview of findings]

## Severity Scale
- **Critical**: Accessibility barrier, wrong semantic element, missing ARIA for interactive component
- **Major**: Redundant DOM nodes, missing focus indicator, hardcoded values, contrast violation
- **Minor**: Suboptimal nesting, missing optional ARIA, inconsistent spacing

## Findings by Component
### [Component Name]
- **Semantic HTML**: [pass/fail with details]
- **DOM Structure**: [nesting depth, unnecessary wrappers]
- **Accessibility**: [ARIA attributes, keyboard, focus]
- **Token Discipline**: [pass/fail with details]
- **Issues**: [numbered list of specific issues with severity]

## Findings: Example App
### [Page Name]
- [findings]

## Cross-Cutting Findings
[project-wide issues]

## Summary Statistics
- Total components audited: X
- Critical issues: X
- Major issues: X
- Minor issues: X

## Recommended Priority Fixes
[Ordered list of highest-impact fixes]
```

## Scope
- **Creates**: `.ai-queue/_docs/audit-report.md`
- **Does NOT modify**: any source code, constitution files, or contract files
- This is a READ-ONLY audit — it produces a report, it does not fix issues

## Important Notes
- Read the UPDATED `AI_CONSTITUTION.md` and `DESIGN_CONSTITUTION.md` (from task 003) before auditing
- Read `packages/FRONTEND_QUALITY.contract.md` (from task 004) and use it as the evaluation rubric
- Be thorough but fair — note what's done WELL, not just what's wrong
- If a component is a stub (TODO comments, minimal implementation), note it as "stub — not auditable" rather than listing dozens of issues
