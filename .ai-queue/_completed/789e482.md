<!-- auto-queue -->
# Commit History
- 81122ae feat(components): add Loader component and fix Button spinner contrast
- 789e482 feat(components): add Loader component and fix Button spinner contrast (#001) [merge]

# 001 — Button Spinner Contrast & New Loader Component

## Summary

1. Fix the loading-state Button so its spinner has high contrast against the button's background.
2. Create a new `Loader` component (Layer 3 — styled) with primary, light, and dark variants.

## Scope

- `packages/components/Button/Button.tsx`
- `packages/components/Loader/` (new directory)
- `packages/components/Loader/Loader.tsx` (new file)
- `packages/components/Loader/index.ts` (new file)
- `packages/components/index.ts` (add Loader export)
- `src/index.ts` (add Loader re-export)

## Tasks

### 1. Button — Fix spinner contrast in loading state

**Problem:** The Button uses `<Spinner size="small" />` when `loading` is true. The Spinner primitive defaults to `color="$color"` (the page text color). On high-contrast-background variants like `default`, `solid`, and `destructive` (which all have `backgroundColor: '$color10'`), `$color` doesn't contrast well — it's the same hue family.

**File:** `packages/components/Button/Button.tsx`

**Current code (line ~210-214):**
```tsx
{loading ? (
  <>
    <Spinner size="small" />
    <VisuallyHidden>Loading</VisuallyHidden>
  </>
) : children}
```

**Fix:** Pass a `color` prop to Spinner that matches the text color for the current variant. The ButtonTextBase already has the correct per-variant text colors:

- `default` / `solid` / `destructive` → text is `$color1` (lightest — white on dark bg)
- `secondary` → text is `$color` (standard text)
- `outline` / `ghost` → text is `$color` (standard text)
- `link` → text is `$color10` (accent)

Create a `SPINNER_COLOR_MAP` that maps variant to spinner color:
```ts
const SPINNER_COLOR_MAP: Record<ButtonVariant, string> = {
  default: '$color1',
  solid: '$color1',
  destructive: '$color1',
  secondary: '$color',
  outline: '$color',
  ghost: '$color',
  link: '$color10',
}
```

Then pass it:
```tsx
{loading ? (
  <>
    <Spinner size="small" color={SPINNER_COLOR_MAP[variant]} />
    <VisuallyHidden>Loading</VisuallyHidden>
  </>
) : children}
```

Since `variant` is already in scope in `ButtonBase`, this is straightforward.

### 2. Create the Loader component

**New files:**
- `packages/components/Loader/Loader.tsx`
- `packages/components/Loader/index.ts`

**Design:** A standalone loading indicator component with size and color variants. Uses the same dot-spinner visual as the `Spinner` primitive but with token-aware color variants.

**Props interface:**
```ts
export interface LoaderProps {
  size?: 'sm' | 'md' | 'lg'
  variant?: 'primary' | 'light' | 'dark'
}
```

**Variant colors:**
- `primary` — `$color10` (the brand accent color — adapts per theme/brand)
- `light` — `$color4` (a light neutral — subtle on light backgrounds)
- `dark` — `$color11` (a dark neutral — visible on light backgrounds, subtle on dark)

Default variant should be `primary`.

**Implementation:** Import and wrap the `Spinner` primitive from `../../primitives`, mapping variant to color:

```tsx
import { Spinner } from '../../primitives'

const VARIANT_COLOR_MAP = {
  primary: '$color10',
  light: '$color4',
  dark: '$color11',
} as const

// Map our named sizes to Spinner sizes
const SIZE_MAP = { sm: 'sm', md: 'md', lg: 'lg' } as const

export function Loader({ size = 'md', variant = 'primary' }: LoaderProps) {
  return <Spinner size={SIZE_MAP[size]} color={VARIANT_COLOR_MAP[variant]} />
}
```

**index.ts:**
```ts
export { Loader } from './Loader'
export type { LoaderProps } from './Loader'
```

### 3. Export the Loader from barrel files

**File:** `packages/components/index.ts`
- Add `export { Loader } from './Loader'`
- Add `export type { LoaderProps } from './Loader'`

**File:** `src/index.ts`
- In the Layer 3 section, add `Loader` to the component export block
- Add `LoaderProps` to the type export block

## Acceptance Criteria

- [ ] Button loading spinner has high contrast in all variants (white on dark bg, dark on light bg)
- [ ] Loader component renders a spinner colored with `$color10` by default (brand primary)
- [ ] Loader `light` variant renders a subtle light-neutral spinner
- [ ] Loader `dark` variant renders a darker neutral spinner
- [ ] Loader supports sm/md/lg sizes
- [ ] Loader is exported from `@vlting/ui`
- [ ] No TypeScript errors introduced
