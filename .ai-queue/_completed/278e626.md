<!-- auto-queue -->
# Commit History
- `268aa72` fix(components): radiogroup/checkbox label a11y, spacing, and focus
- `278e626` fix(components): radiogroup/checkbox label a11y, spacing, and focus (#003)

# 003 — RadioGroup & Checkbox: Spacing, Label A11y & Focus Colors

## Summary

Fix the excessive spacing between radio/checkbox controls and their labels, add proper `<label>` HTML elements for accessibility, and update focus outline color to `$color10`.

## Scope

- `packages/components/RadioGroup/RadioGroup.tsx`
- `packages/components/Checkbox/Checkbox.tsx`

## Tasks

### 1. RadioGroup — Reduce spacing between radio and label

**Problem:** The gap between the radio button and its label text is too large.

**File:** `packages/components/RadioGroup/RadioGroup.tsx`

**Current state:** The `Item` component uses `<XStack gap="$2">` — `$2` maps to ~16px which is indeed too much for the spacing between a radio circle and its label.

**Fix:** Reduce to `gap="$1.5"` (~12px) or even `gap="$1"` (~10px). The shadcn radio-group uses roughly 8px gap. Use `gap="$1"` for a tight, clean look.

### 2. RadioGroup — Proper `<label>` HTML tag

**Problem:** The label is wrapped in a `<span onClick>` which is not accessible. Screen readers won't associate the text with the radio input. Also, clicking the label should toggle the radio via native HTML behavior, not a manual click handler.

**Current code:**
```tsx
{children && (
  <span
    onClick={() => !itemDisabled && itemRef.current?.click()}
    style={{ cursor: itemDisabled ? 'not-allowed' : 'pointer' }}
  >
    {children}
  </span>
)}
```

**Fix:** Replace `<span onClick>` with a proper `<label>` element:
```tsx
{children && (
  <label
    htmlFor={radioId}
    style={{
      cursor: itemDisabled ? 'not-allowed' : 'pointer',
      userSelect: 'none',
    }}
  >
    {children}
  </label>
)}
```

For this to work with Tamagui's RadioGroup.Item:
1. Generate a unique ID with `useId()`: `const radioId = useId()`
2. Pass `id={radioId}` to the `RadioGroupItem` component
3. Use `htmlFor={radioId}` on the `<label>`

If Tamagui's RadioGroup.Item doesn't forward the `id` prop to the underlying `<input>` element, an alternative approach is to wrap the entire row in a `<label>`:
```tsx
<label style={{ display: 'flex', alignItems: 'center', gap: '8px', cursor: ... }}>
  <RadioGroupItem ... />
  {children}
</label>
```

This way clicking anywhere in the label (including the text) toggles the radio. This is the most robust a11y pattern.

**Remove** the `useRef` and manual click handler — the `<label>` wrapper handles it natively.

### 3. Checkbox — Reduce spacing between checkbox and label

**Problem:** Same as RadioGroup — `gap="$2"` is too large.

**File:** `packages/components/Checkbox/Checkbox.tsx`

**Current state:** `<XStack alignItems="center" gap="$2">`

**Fix:** Change to `gap="$1"` for consistent tight spacing.

### 4. Checkbox — Proper `<label>` HTML tag

**Problem:** Same as RadioGroup — uses `<span onClick>` instead of `<label>`.

**Current code:**
```tsx
{children && (
  <span
    onClick={() => !disabled && checkboxRef.current?.click()}
    style={{ cursor: disabled ? 'not-allowed' : 'pointer' }}
  >
    {children}
  </span>
)}
```

**Fix:** Same approach as RadioGroup. Wrap the entire row in a `<label>` element:
```tsx
function Root({ children, ... }: CheckboxRootProps) {
  return (
    <label
      style={{
        display: 'flex',
        alignItems: 'center',
        gap: 8,  // matches $1 ≈ 10px or use a tighter value
        cursor: disabled ? 'not-allowed' : 'pointer',
        opacity: disabled ? 0.5 : 1,
        userSelect: 'none',
      }}
    >
      <CheckboxButton ... />
      {children}
    </label>
  )
}
```

Or, if the visual layout needs Tamagui's XStack for token-based gap:
```tsx
<XStack alignItems="center" gap="$1" opacity={disabled ? 0.5 : 1} tag="label">
```
Note: `tag="label"` on XStack may or may not render a `<label>` in Tamagui v2. If not, wrap in a native `<label>` element and put the XStack inside.

**Remove** the `useRef` and manual click handler — native `<label>` wrapping handles it.

### 5. A11y best practices for radios and checkboxes

Ensure these a11y requirements are met:

**RadioGroup:**
- Each radio item should be inside a `<label>` for click-to-select behavior
- The `RadioGroup.Root` should have `role="radiogroup"` (Tamagui's RadioGroup likely adds this)
- Each radio should have `aria-checked` (Tamagui handles this)
- The group should support `aria-labelledby` or `aria-label` if no visible group label exists. Add an optional `aria-label` prop to `RadioGroupRootProps`.

**Checkbox:**
- Each checkbox + label should be wrapped in `<label>` for click-to-toggle
- The checkbox should have `aria-checked` (Tamagui handles this)
- `aria-required` should be passed when `required` prop is set (already in current code via `required` prop)

### 6. Focus outline color — use `$color10`

Both RadioGroup and Checkbox are low-contrast-background controls (transparent bg with a border). Their focus outline should use `$color10`.

**RadioGroup.Item:** Currently has no explicit `focusVisibleStyle`. Add:
```tsx
focusVisibleStyle={{
  outlineWidth: 2,
  outlineOffset: 1,
  outlineColor: '$color10',
  outlineStyle: 'solid',
}}
```

**Checkbox (CheckboxButton):** Currently has no explicit `focusVisibleStyle`. Add:
```tsx
focusVisibleStyle={{
  outlineWidth: 2,
  outlineOffset: 1,
  outlineColor: '$color10',
  outlineStyle: 'solid',
}}
```

## Acceptance Criteria

- [ ] Gap between radio/checkbox control and label is tight (~8-10px, not 16px)
- [ ] Both RadioGroup.Item and Checkbox.Root use a proper `<label>` HTML element
- [ ] Clicking the label text toggles the radio/checkbox (native behavior, no manual click handlers)
- [ ] Screen readers correctly associate label text with the form control
- [ ] RadioGroup.Root has `role="radiogroup"` (verify Tamagui provides this)
- [ ] Focus-visible outline uses `$color10` on both components
- [ ] No manual `useRef` + click hacks — removed in favor of native `<label>` behavior
- [ ] No TypeScript errors
